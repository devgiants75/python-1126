'''
python_lesson_10_coffee_machine_pop
procedural-oriented programming -> ì ˆì°¨ì§€í–¥ í”„ë¡œê·¸ë˜ë°
'''
MENU = {
    "ì—ìŠ¤í”„ë ˆì†Œ": {
        "ì¬ë£Œ": {
            "ë¬¼": 50,
            "ì»¤í”¼": 18,
        },
        "ê°€ê²©": 1.5,
    },
    "ë¼ë–¼": {
        "ì¬ë£Œ": {
            "ë¬¼": 200,
            "ìš°ìœ ": 150,
            "ì»¤í”¼": 24,
        },
        "ê°€ê²©": 2.5,
    },
    "ì¹´í‘¸ì¹˜ë…¸": {
        "ì¬ë£Œ": {
            "ë¬¼": 250,
            "ìš°ìœ ": 100,
            "ì»¤í”¼": 24,
        },
        "ê°€ê²©": 3.0,
    }
}
# ë‹¤ì¤‘ ë”•ì…”ë„ˆë¦¬ì—ì„œì˜ valueë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²• ì˜ˆì‹œ
# print(MENU["ë¼ë–¼"]["ê°€ê²©"])
# # ì¹´í‘¸ì¹˜ë…¸ì˜ ìš°ìœ ì˜ ì–‘
# print(MENU["ì¹´í‘¸ì¹˜ë…¸"]["ì¬ë£Œ"]["ìš°ìœ "])
# # ì—ìŠ¤í”„ë ˆì†Œì˜ ì»¤í”¼ì˜ ì–‘
# print(MENU["ì—ìŠ¤í”„ë ˆì†Œ"]["ì¬ë£Œ"]["ì»¤í”¼"])

profit = 0              # í˜„ì¬ ìíŒê¸° ë‚´ì— ë“¤ì–´ ìˆëŠ” ê¸ˆì•¡
resources = {
    "ë¬¼": 300,
    "ìš°ìœ ": 200,
    "ì»¤í”¼": 100,
}
# í•¨ìˆ˜ ì •ì˜ ë¶€ë¶„
# 4ë²ˆ ê³¼ì •ê³¼ ê´€ë ¨ëœ í•¨ìˆ˜ ì‘ì„±
def is_resource_sufficient(order_ingredients):      # order_ingredientsë¥¼ dictë¡œ ê°€ì •
    """DocString : í•¨ìˆ˜/í´ë˜ìŠ¤ê°€ ì–´ë–¤ ì‘ë™ì„ í•˜ëŠ”ì§€ 'ì‚¬ëŒë“¤ì—ê²Œ' ì„¤ëª…í•´ì£¼ëŠ” ê¸°ëŠ¥
    True / Falseë¥¼ ë°˜í™˜ -> ì£¼ë¬¸ ë°›ì€ ìŒë£Œë¥¼ resourcesì—ì„œ ì¬ë£Œ ì°¨ê°ì„ í•˜ê³  ë‚œ í›„
    ìŒë£Œ ë§Œë“¤ê¸°ê°€ ê°€ëŠ¥í•˜ë©´ True ì•„ë‹ˆë©´ Falseë¥¼ ë°˜í™˜
    """
    # ì–´ë–»ê²Œ í•˜ë©´ resourcesì˜ valueë“¤ê³¼ drink = MENU[choice]ì˜ ë¬¼, ìš°ìœ , ì»¤í”¼ë“¤ê³¼ ì—°ì‚°ì„ í•  ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í•´ì•¼ í•¨.
    for item in order_ingredients:      # itemì€ order_ingredientsì˜ keyë“¤ì´ ë¨.
        if order_ingredients[item] > resources[item]:
            print(f"ì£„ì†¡í•©ë‹ˆë‹¤, í˜„ì¬ {item}ì´(ê°€) ë¶€ì¡±í•©ë‹ˆë‹¤.")
            return False
        return True     # elseë¥¼ ì“°ì§€ ì•Šì€ ì´ìœ  : ìœ„ì˜ ifë¬¸ì´ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì–´ì°¨í”¼ Trueê°€ ë˜ê¸° ë•Œë¬¸

# ë™ì „ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ ì •ì˜
def process_coins():
    """ë™ì „ë“¤ì„ ì…ë ¥ ë°›ì•„ ì „ì²´ ê¸ˆì•¡ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜"""
    print("ë™ì „ì„ ë„£ìœ¼ì„¸ìš”.")
    # ì¿¼í„°, ë‹¤ì„, ë‹ˆì¼ˆ, í˜ë‹ˆ ë„¤ ì¢…ë¥˜ì˜ ë™ì „ì´ ìˆìŒ. ì¿¼í„° = 0.25 ë‹¬ëŸ¬ / ë‹¤ì„ = 0.1 ë‹¬ëŸ¬ / ë‹ˆì¼ˆ = 0.05 ë‹¬ëŸ¬ / í˜ë‹ˆ = 0.01 ë‹¬ëŸ¬
    # ê°ê° input í•¨ìˆ˜ë¥¼ í†µí•´ ë™ì „ì˜ ê°œìˆ˜ë¥¼ ì…ë ¥ ë°›ê³  ì´í•©ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì‹œì˜¤.
    # total = 0.0
    # ì¼ë¶€ëŸ¬ ë³µì¡í•œ ì˜ˆì‹œ
    # quarters = input("ì¿¼í„° ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")                             # ì§€ì—­ ë³€ìˆ˜ë“¤ì„ ì„ ì–¸
    # dimes =  input("ë‹¤ì„ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")
    # nickels = input("ë‹ˆì¼ˆ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")
    # pennies = input("í˜ë‹ˆ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")
    # total = (int(quarters) * 0.25) + (int(dimes) * 0.1) + (int(nickels) * 0.05) + (int(pennies) * 0.01)
    total = int(input("ì¿¼í„° ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")) * 0.25
    total += int(input("ë‹¤ì„ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")) * 0.1
    total += int(input("ë‹ˆì¼ˆ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")) * 0.05
    total += int(input("í˜ë‹ˆ ë™ì „ì„ ëª‡ê°œ ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ? >> ")) * 0.01
    return total

def is_transaction_successful(money_received, drink_cost):  # money_receivedëŠ” process_coins()ì˜ ë¦¬í„´ê°’
    """ê±°ë˜ê°€ ìˆ˜ë½ë˜ë©´ True, ì‹¤íŒ¨í•˜ë©´(ë™ì „ì˜ ì´í•© ìŒë£Œ ê°€ê²©ë³´ë‹¤ ì ë‹¤ë©´) Falseë¥¼ ë°˜í™˜"""
    charge = money_received - drink_cost
    # ì´í•˜ì— ì‘ì„±í•  ë¶€ë¶„ì€ money_receivedê°€ drink_costë³´ë‹¤ ë§ê±°ë‚˜ ê°™ë‹¤ë©´ -> profitì— drink_costë§Œí¼ ì¶”ê°€í•´ì£¼ê³ ,
    # ì»¤í”¼ë¥¼ ë§Œë“œëŠ” ê³¼ì •ìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ìœ„í—¤ Trueë¥¼ ë¦¬í„´
    # ì•„ë‹ˆë¼ë©´, "ì£„ì†¡í•©ë‹ˆë‹¤. ëˆì´ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë™ì „ì„ ë°˜í™˜í•©ë‹ˆë‹¤."ë¥¼ ì¶œë ¥í•˜ê³  Falseë¥¼ ë°˜í™˜
    # ì´ìƒì˜ ì§€ì‹œì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ì¡°ê±´ë¬¸ì„ ì‘ì„±í•˜ì‹œì˜¤.
    if charge >= 0:
        # ì§€ì—­ ë³€ìˆ˜ / ì „ì—­ ë³€ìˆ˜ ê°œë… -> í•¨ìˆ˜ ë‚´ì˜ ë³€ìˆ˜ê°€ mainë‹¨ê³„ì— ìˆëŠ” ë³€ìˆ˜ë¥¼ ì¡°ì‘í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë˜ì§€ ì•ŠìŒ
        global profit   # í•¨ìˆ˜ ë‚´ì—ì„œ ì „ì—­ ë³€ìˆ˜ì˜ ê°’ì„ ë³€í™˜ì‹œí‚¤ëŠ” í‚¤ì›Œë“œ -> global // ê¶Œì¥ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.
        profit += drink_cost
        print(f"ì”ëˆ $ {charge}ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.")
        return True
    else:
        print("ì£„ì†¡í•©ë‹ˆë‹¤. ëˆì´ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë™ì „ì„ ë°˜í™˜í•©ë‹ˆë‹¤.")
        return False

def make_coffee(drink_name, order_ingredients):
    """resourcesì— ìˆëŠ” ì¬ë£Œì—ì„œ MENU["ìŒë£Œì´ë¦„"]["ì¬ë£Œ"]ë“¤ì„ ì°¨ê°í•¨ -> ì°¨ê°ì€ ë¬´ì¡°ê±´ ì´ë£¨ì–´ì§
    -> is_resource_sufficientë¥¼ í†µê³¼í–ˆê¸° ë•Œë¬¸ì—."""
    # ì–´ë–»ê²Œ í•˜ë©´ resourcesì˜ ì¬ë£Œë“¤ì—ì„œ í•´ë‹¹ ìŒë£Œì˜ ì¬ë£Œë“¤ì„ ì°¨ê°í•  ìˆ˜ ìˆë‚˜ìš”? -> ì•„ê¹Œ ì „ì— í–ˆìŠµë‹ˆë‹¤
    # drink_nameê³¼ order_ingredientsë¥¼ ì´ìš©í•´ì„œ ì°¨ê°í•´ì•¼ í•¨.
    for item in order_ingredients:
        resources[item] -= order_ingredients[item]

    print(f"{drink_name}â˜•ì´(ê°€) ë‚˜ì™”ìŠµë‹ˆë‹¤. ë§›ìˆê²Œ ë“œì„¸ìš”ğŸ˜Š")


# main ë° í•¨ìˆ˜ í˜¸ì¶œ ë¶€ë¶„
is_on = True
while is_on:
    choice = input("ì–´ë–¤ ìŒë£Œë¥¼ ë“œì‹œê² ìŠµë‹ˆê¹Œ? ì—ìŠ¤í”„ë ˆì†Œ / ë¼ë–¼ / ì¹´í‘¸ì¹˜ë…¸ : ")
    # ë§Œì•½ì— choiceê°€ offë¼ë©´ ë°˜ë³µë¬¸ ì¢…ë£Œí•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì‹œì˜¤.
    if choice == "off":
        is_on = False
        # break
    # ë§Œì•½ choiceê°€ reportë¼ë©´ í˜„ì¬ì˜ ë¬¼, ìš°ìœ , ì»¤í”¼, ê·¸ë¦¬ê³  ëˆì„ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì¡°ê±´ë¬¸ ì‘ì„±
    elif choice == "report":
        print(f"ë¬¼ì˜ ì–‘ì€ {resources['ë¬¼']}ml,\nìš°ìœ ì˜ ì–‘ì€ {resources['ìš°ìœ ']}ml,\nì»¤í”¼ì˜ ì–‘ì€ {resources['ì»¤í”¼']}g,\ní˜„ì¬ ìíŒê¸° ë‚´ì˜ ëˆì€ $ {profit}ì…ë‹ˆë‹¤.")
    elif choice in ("ì—ìŠ¤í”„ë ˆì†Œ", "ë¼ë–¼", "ì¹´í‘¸ì¹˜ë…¸"):
        drink = MENU[choice]
        # ë©”ë‰´ëª…ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í–ˆì„ ë•Œ ì´ë£¨ì–´ì§€ëŠ” ìíŒê¸°ì˜ ì²˜ë¦¬ ê³¼ì •
        # 1. í•´ë‹¹ ìŒë£Œì—ì„œ ì†Œëª¨ë˜ëŠ” ì›ì¬ë£Œì˜ ì–‘ì´ ìíŒê¸° ë‚´ì— ì¶©ë¶„íˆ ìˆëŠ”ì§€ë¥¼ í™•ì¸ True / False ->
        # 2. ë™ì „ì„ ë„£ëŠ” processë¥¼ í™•ì¸ -> ë™ì „ì˜ ì´í•© -> ìŒë£Œ ê°€ê²©ë³´ë‹¤ ë†’ë‹¤ë©´ ë‹¤ìŒ ê³¼ì •ìœ¼ë¡œ ->
        # 3. ìíŒê¸° ë‚´ì˜ ì›ì¬ë£Œì—ì„œ ìŒë£Œê°€ ìš”êµ¬í•˜ëŠ” ì›ì¬ë£Œë§Œí¼ ì°¨ê°, ìíŒê¸°ì— ìˆ˜ìµì„ ë”í•´ì•¼ í•¨(ìŒë£Œ ê°€ê²©ë§Œí¼), ìŒë£Œ ì¶”ì¶œ
        if is_resource_sufficient(drink["ì¬ë£Œ"]): # resourcesì˜ keyëŠ” ë¬¼, ìš°ìœ , ì»¤í”¼ì´ê¸° ë•Œë¬¸ì— "ì¬ë£Œ"í‚¤ë¥¼ ì¶”ì¶œ ë¶ˆê°€ëŠ¥
                                                 # ë”°ë¼ì„œ, argumentë¡œ drink["ì¬ë£Œ"]ê¹Œì§€ ëª…ì‹œí•´ì•¼ í•¨. drinkëŠ” ë¶ˆê°€ëŠ¥
            # ì—¬ê¸°ê°€ ì‹¤í–‰ì´ ë˜ì—ˆë‹¤ë©´ is_resource_sufficient()ê°€ Trueë¼ëŠ” ì˜ë¯¸ -> 2ë²ˆ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì•¼ í•¨. -> ë™ì „ ë„£ê³ , ë™ì „ í•© ê³„ì‚°
            if is_transaction_successful(money_received=process_coins(), drink_cost=drink["ê°€ê²©"]):
                # ì—¬ê¸°ê°€ ì‹¤í–‰ì´ ë˜ì—ˆë‹¤ë©´ is_transaction_successfulì˜ ê²°ê³¼ê°’ì´ True -> charge >= 0ì¼ê±°ê³ , coffeeê°€ ë‚˜ì™€ì•¼ í•¨.
                make_coffee(drink_name=choice, order_ingredients=drink["ì¬ë£Œ"])
    else:           # ì˜¤íƒ€ê°€ ë‚¬ì„ ê²½ìš°
        print("ì˜ëª» ì…ë ¥ í•˜ì…¨ìŠµë‹ˆë‹¤, ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.")












